"use strict";(self.webpackChunkwinnow=self.webpackChunkwinnow||[]).push([[323],{323:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var a=n(43),s=n(579);const l=e=>{let{name:t,setName:n,emblem:l,isLead:i}=e;const[r,o]=(0,a.useState)(0);return(0,s.jsxs)("div",{style:{backgroundImage:"url(https://www.bungie.net".concat(l.secondaryIcon,")")},className:"w-[474px] h-[95px] pl-[85px] flex flex-col shadow-lg rounded-sm relative",children:[i?(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2044.21 2044.21",className:"absolute w-5 fill-[#ccd32b] -ml-[84px] mt-[1px]",fill:"currentColor",children:(0,s.jsx)("polygon",{points:"0 0 0 2044.21 2044.21 0 0 0"})}):(0,s.jsx)(s.Fragment,{}),(0,s.jsxs)("p",{className:"absolute font-emblem text-[#d5c154] right-[8px] -top-[6px] text-[36px]",children:[(0,s.jsx)("span",{className:"relative font-symbol text-[26px] -top-[5px]",children:"\ue038"}),(0,s.jsx)("span",{className:"font-semibold drop-shadow-[0_2px_0px_#0003] tracking-[1.4px]",children:"9999"})]}),(0,s.jsx)("input",{type:"text",placeholder:"Click to change",value:t,onChange:e=>{const t=e.currentTarget.value;t.length<=26&&n(t)},onBlur:e=>{if(e.currentTarget.scrollWidth!==e.currentTarget.clientWidth){const t=e.currentTarget.scrollWidth/(e.currentTarget.clientWidth-45);o(t)}},onFocus:e=>{o(0)},className:"-ml-[16.5px] -m-[3.5px] input max-w-[19.5rem] bg-transparent outline-transparent font-emblem tracking-[0.8px] font-semibold text-white placeholder-white drop-shadow-[0_2px_0px_#0003]",style:{fontSize:r>0?27/r:27}}),(0,s.jsxs)("p",{className:"text-[22px] -mt-[9px] opacity-40 font-emblem font-medium tracking-[0.8px] text-white",children:[(0,s.jsx)("span",{className:"font-symbol",children:"\u24eb"})," Paragon"]}),(0,s.jsx)("p",{className:"text-[23px] -mt-[6px] opacity-30 font-emblem font-medium tracking-[0.8px] text-white",children:"winnow.oatsfx.com"})]})},i=()=>(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 62.08 71.68",className:"fill-primary opacity-25 w-1/6",children:[(0,s.jsxs)("g",{children:[(0,s.jsx)("polygon",{points:"30.04 59.7 10.87 48.64 1 54.34 30.04 71.1 30.04 59.7","fill-opacity":"0",children:(0,s.jsx)("animate",{attributeName:"fill-opacity",values:"1;0;0;0;0;0;1",dur:"3",repeatCount:"indefinite"})}),(0,s.jsx)("polygon",{points:"61.08 54.34 51.2 48.64 32.04 59.7 32.04 71.1 61.08 54.34","fill-opacity":"0",children:(0,s.jsx)("animate",{attributeName:"fill-opacity",values:"0;1;0;0;0;0;0",dur:"3",repeatCount:"indefinite"})}),(0,s.jsx)("polygon",{points:"52.2 24.77 52.2 46.91 62.08 52.6 62.08 19.07 52.2 24.77","fill-opacity":"0",children:(0,s.jsx)("animate",{attributeName:"fill-opacity",values:"0;0;1;0;0;0;0",dur:"3",repeatCount:"indefinite"})}),(0,s.jsx)("polygon",{points:"32.04 0.58 32.04 11.97 51.2 23.04 61.08 17.34 32.04 0.58","fill-opacity":"0",children:(0,s.jsx)("animate",{attributeName:"fill-opacity",values:"0;0;0;1;0;0;0",dur:"3",repeatCount:"indefinite"})}),(0,s.jsx)("polygon",{points:"1 17.34 10.87 23.04 30.04 11.97 30.04 0.58 1 17.34","fill-opacity":"0",children:(0,s.jsx)("animate",{attributeName:"fill-opacity",values:"0;0;0;0;1;0;0",dur:"3",repeatCount:"indefinite"})}),(0,s.jsx)("polygon",{points:"9.87 46.91 9.87 24.77 0 19.07 0 52.6 9.87 46.91","fill-opacity":"0",children:(0,s.jsx)("animate",{attributeName:"fill-opacity",values:"0;0;0;0;0;1;0",dur:"3",repeatCount:"indefinite"})})]}),(0,s.jsxs)("g",{children:[(0,s.jsx)("polygon",{points:"30.04 47.09 21.8 42.33 12.9 47.47 30.04 57.36 30.04 47.09","fill-opacity":"0",children:(0,s.jsx)("animate",{attributeName:"fill-opacity",values:"1;1;0;0;0;0;1",dur:"1.5",repeatCount:"indefinite"})}),(0,s.jsx)("polygon",{points:"20.8 40.6 20.8 31.08 11.9 25.95 11.9 45.73 20.8 40.6","fill-opacity":"0",children:(0,s.jsx)("animate",{attributeName:"fill-opacity",values:"0;1;1;0;0;0;0",dur:"1.5",repeatCount:"indefinite"})}),(0,s.jsx)("polygon",{points:"21.8 29.35 30.04 24.59 30.04 14.32 12.9 24.21 21.8 29.35","fill-opacity":"0",children:(0,s.jsx)("animate",{attributeName:"fill-opacity",values:"0;0;1;1;0;0;0",dur:"1.5",repeatCount:"indefinite"})}),(0,s.jsx)("polygon",{points:"32.04 14.32 32.04 24.59 40.28 29.35 49.17 24.21 32.04 14.32","fill-opacity":"0",children:(0,s.jsx)("animate",{attributeName:"fill-opacity",values:"0;0;0;1;1;0;0",dur:"1.5",repeatCount:"indefinite"})}),(0,s.jsx)("polygon",{points:"41.28 31.08 41.28 40.6 50.17 45.73 50.17 25.95 41.28 31.08","fill-opacity":"0",children:(0,s.jsx)("animate",{attributeName:"fill-opacity",values:"0;0;0;0;1;1;0",dur:"1.5",repeatCount:"indefinite"})}),(0,s.jsx)("polygon",{points:"40.28 42.33 32.04 47.09 32.04 57.36 49.17 47.47 40.28 42.33","fill-opacity":"0",children:(0,s.jsx)("animate",{attributeName:"fill-opacity",values:"1;0;0;0;0;1;1",dur:"1.5",repeatCount:"indefinite"})})]})]});var r=n(475),o=n(204);const c=()=>{const[e,t]=(0,a.useState)({alertType:"alert",message:""}),[n]=(0,r.ok)(),{data:c,loading:p}=(()=>{const e="https://www.bungie.net/Platform/Destiny2/Manifest/",[t,n]=(0,a.useState)([]),[s,l]=(0,a.useState)(!0);return(0,a.useEffect)((()=>{(async()=>{const t=[];try{const s=await fetch(e);if(!s.ok)throw new Error("Failed to fetch data");const l=(await s.json()).Response.jsonWorldComponentContentPaths.en.DestinyInventoryItemDefinition;try{const e=await fetch("".concat("https://www.bungie.net").concat(l));if(!e.ok)throw new Error("Failed to fetch data");const n=await e.json();for(let a in n)if("Emblem"===n[a].itemTypeDisplayName){const e=n[a].hash;let s=n[a].displayProperties.name;const l=n[a].displayProperties.icon,i=n[a].secondaryIcon,r=n[a].secondaryOverlay,o=n[a].secondarySpecial;1968995963===e&&(s+=" (Sunflower)"),s&&l&&i&&r&&o&&t.push({hash:e,name:s,icon:l,secondaryIcon:i,secondaryOverlay:r,secondarySpecial:o})}}catch(a){console.log(a)}n(t)}catch(a){console.log(a)}finally{l(!1)}})()}),[e]),{data:t,loading:s}})(),[d,m]=(0,a.useState)(""),[u,h]=(0,a.useState)(!1),[x,f]=(0,a.useState)(!1),[g,y]=(0,a.useState)(n.get("name")?n.get("name"):""),[j,w]=(0,a.useState)({hash:0,name:"",icon:"",secondaryIcon:"",secondaryOverlay:"",secondarySpecial:""});return(0,a.useMemo)((()=>{if(!p)if(n.get("emblem")){if(c.some((e=>e.hash===Number(n.get("emblem"))))){const e=c.findIndex((e=>e.hash===Number(n.get("emblem"))));w(c[e])}}else w(c[Math.floor(Math.random()*c.length)])}),[c]),(0,s.jsxs)("div",{className:"flex w-full flex-col items-center gap-2",children:[(0,s.jsx)("p",{className:"font-bold text-2xl font-display tracking-tighter text-accent",children:"Emblem Try On"}),p?(0,s.jsx)(i,{}):(0,s.jsxs)("div",{className:"flex w-full flex-col items-center gap-3",children:[(0,s.jsx)(l,{name:g,setName:y,emblem:j,isLead:x}),(0,s.jsx)("p",{children:"Click on the name to change it!"}),(0,s.jsxs)("p",{className:"text-lg",children:["Trying on"," ",(0,s.jsx)("span",{className:"text-primary font-semibold",children:j.name})]}),(0,s.jsx)("input",{type:"text",placeholder:"Search an emblem",className:"input input-bordered w-full max-w-xs",onChange:e=>{m(e.currentTarget.value)},onFocus:()=>h(!0),onBlur:()=>h(!1)}),u&&c.filter((e=>((0,o.mh)(e.name).toLowerCase().includes(d)||e.name.toLowerCase().includes(d))&&d.length>0)).length>0?(0,s.jsx)("div",{className:"absolute top-[380px] z-[50] border w-80 rounded gap-1 p-2 flex flex-col bg-base-100",children:c.filter((e=>((0,o.mh)(e.name).toLowerCase().includes(d)||e.name.toLowerCase().includes(d))&&d.length>0)).slice(0,7).map((e=>(0,s.jsxs)("p",{className:"flex align-left w-full items-center gap-2 hover:cursor-pointer",onMouseDown:()=>w(e),children:[(0,s.jsx)("img",{className:"w-8 rounded",src:"https://www.bungie.net"+e.icon}),e.name]},e.hash)))}):(0,s.jsx)(s.Fragment,{}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("button",{className:"btn btn-success",onClick:()=>{navigator.clipboard.writeText("".concat(window.location.href,"?emblem=").concat(j.hash).concat(g?"&name=".concat(g):"")),t({alertType:"alert-info",message:"Copied link to clipboard! ".concat(g||"Guardian"," trying on ").concat(j.name,".")})},children:"Share"}),(0,s.jsxs)("details",{className:"dropdown dropdown-center",children:[(0,s.jsx)("summary",{className:"btn w-24",children:"Tools"}),(0,s.jsxs)("ul",{className:"p-2 shadow-xl menu dropdown-content bg-base-100 rounded-box w-52",children:[(0,s.jsx)("li",{children:(0,s.jsx)("a",{onClick:()=>w(c[Math.floor(Math.random()*c.length)]),children:"Randomize Emblem"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{onClick:()=>f((e=>!e)),children:"Toggle Fireteam Lead"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"https://destinyemblemcollector.com/emblem?id="+j.hash,target:"_blank",children:"View on DEC"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"https://emblem.report/"+j.hash,target:"_blank",children:"View on emblem.report"})}),(0,s.jsx)("li",{className:"pointer-events-none",children:(0,s.jsx)("p",{className:"text-neutral",children:"More coming soon..."})})]})]})]}),e.message.length>0?(0,s.jsxs)("div",{role:"alert",className:"alert w-2/3 "+e.alertType,children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"stroke-current shrink-0 w-6 h-6",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsx)("span",{children:e.message})]}):(0,s.jsx)(s.Fragment,{}),(0,s.jsxs)("p",{className:"font-light",children:["As formerly seen on"," ",(0,s.jsx)("a",{className:"underline",href:"https://levante.dev",target:"_blank",children:"Levante"})]})]}),(0,s.jsx)("div",{className:"divider font-display"})]})}},204:(e,t,n)=>{n.d(t,{Ae:()=>l,CL:()=>a,cT:()=>i,cW:()=>s,kH:()=>r,mh:()=>c,vh:()=>o});const a=e=>{if(0===e.length)return"";if(1===e.length)return e[0];if(2===e.length)return"".concat(e[0]," and ").concat(e[1]);const t=e.slice(0,-1).join(", "),n=e[e.length-1];return"".concat(t,", and ").concat(n)},s={cone:["circle","triangle"],cube:["square","square"],cylinder:["circle","square"],prism:["triangle","square"],pyramid:["triangle","triangle"],sphere:["circle","circle"]},l=e=>{for(const[t,n]of Object.entries(s))if(JSON.stringify(n.sort())===JSON.stringify(e.sort()))return t;return null},i={circle:["triangle","square"],square:["circle","triangle"],triangle:["circle","square"]},r=e=>{const t=["circle","circle","triangle","triangle","square","square"];for(const n of Object.values(e))if(null!==n)for(const e of s[n])t.splice(t.indexOf(e),1);return t},o=e=>{const t=e.reduce(((e,t)=>(e[t]=(e[t]||0)+1,e)),{}),n=[];return 2===t.circle&&n.push("sphere"),2===t.square&&n.push("cube"),2===t.triangle&&n.push("pyramid"),t.circle&&t.triangle&&n.push("cone"),t.circle&&t.square&&n.push("cylinder"),t.triangle&&t.square&&n.push("prism"),n},c=e=>e.replace("\xea","e").replace("\xe0","a").replace("\xc8","E").replace("\xf6","o").replace("\u2026","...")}}]);
//# sourceMappingURL=323.bb125a38.chunk.js.map