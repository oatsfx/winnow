"use strict";(self.webpackChunkwinnow=self.webpackChunkwinnow||[]).push([[821],{821:(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var a=n(43),l=n(579);const s=e=>{let{name:t,setName:n,emblem:s,isLead:i}=e;const[r,o]=(0,a.useState)(0);return(0,l.jsxs)("div",{style:{backgroundImage:"url(https://www.bungie.net".concat(s.secondaryIcon,")")},className:"w-[474px] h-[95px] pl-[85px] flex flex-col shadow-lg rounded-sm relative",children:[i?(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2044.21 2044.21",className:"absolute w-5 fill-[#ccd32b] -ml-[84px] mt-[1px]",fill:"currentColor",children:(0,l.jsx)("polygon",{points:"0 0 0 2044.21 2044.21 0 0 0"})}):(0,l.jsx)(l.Fragment,{}),(0,l.jsxs)("p",{className:"absolute font-emblem text-[#d5c154] right-[8px] -top-[6px] text-[36px]",children:[(0,l.jsx)("span",{className:"relative font-symbol text-[26px] -top-[5px]",children:"\ue038"}),(0,l.jsx)("span",{className:"font-semibold drop-shadow-[0_2px_0px_#0003] tracking-[1.4px]",children:"9999"})]}),(0,l.jsx)("input",{type:"text",placeholder:"Click to change",value:t,onChange:e=>{const t=e.currentTarget.value;t.length<=26&&n(t)},onBlur:e=>{if(e.currentTarget.scrollWidth!==e.currentTarget.clientWidth){const t=e.currentTarget.scrollWidth/(e.currentTarget.clientWidth-45);o(t)}},onFocus:e=>{o(0)},className:"-ml-[16.5px] -m-[3.5px] input max-w-[19.5rem] bg-transparent outline-transparent font-emblem tracking-[0.8px] font-semibold text-white placeholder-white drop-shadow-[0_2px_0px_#0003]",style:{fontSize:r>0?27/r:27}}),(0,l.jsxs)("p",{className:"text-[22px] -mt-[9px] opacity-40 font-emblem font-medium tracking-[0.8px] text-white",children:[(0,l.jsx)("span",{className:"font-symbol",children:"\u24eb"})," Paragon"]}),(0,l.jsx)("p",{className:"text-[23px] -mt-[6px] opacity-30 font-emblem font-medium tracking-[0.8px] text-white",children:"winnow.oatsfx.com"})]})},i=()=>(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 62.08 71.68",className:"fill-primary opacity-25 w-1/6",children:[(0,l.jsxs)("g",{children:[(0,l.jsx)("polygon",{points:"30.04 59.7 10.87 48.64 1 54.34 30.04 71.1 30.04 59.7","fill-opacity":"0",children:(0,l.jsx)("animate",{attributeName:"fill-opacity",values:"1;0;0;0;0;0;1",dur:"3",repeatCount:"indefinite"})}),(0,l.jsx)("polygon",{points:"61.08 54.34 51.2 48.64 32.04 59.7 32.04 71.1 61.08 54.34","fill-opacity":"0",children:(0,l.jsx)("animate",{attributeName:"fill-opacity",values:"0;1;0;0;0;0;0",dur:"3",repeatCount:"indefinite"})}),(0,l.jsx)("polygon",{points:"52.2 24.77 52.2 46.91 62.08 52.6 62.08 19.07 52.2 24.77","fill-opacity":"0",children:(0,l.jsx)("animate",{attributeName:"fill-opacity",values:"0;0;1;0;0;0;0",dur:"3",repeatCount:"indefinite"})}),(0,l.jsx)("polygon",{points:"32.04 0.58 32.04 11.97 51.2 23.04 61.08 17.34 32.04 0.58","fill-opacity":"0",children:(0,l.jsx)("animate",{attributeName:"fill-opacity",values:"0;0;0;1;0;0;0",dur:"3",repeatCount:"indefinite"})}),(0,l.jsx)("polygon",{points:"1 17.34 10.87 23.04 30.04 11.97 30.04 0.58 1 17.34","fill-opacity":"0",children:(0,l.jsx)("animate",{attributeName:"fill-opacity",values:"0;0;0;0;1;0;0",dur:"3",repeatCount:"indefinite"})}),(0,l.jsx)("polygon",{points:"9.87 46.91 9.87 24.77 0 19.07 0 52.6 9.87 46.91","fill-opacity":"0",children:(0,l.jsx)("animate",{attributeName:"fill-opacity",values:"0;0;0;0;0;1;0",dur:"3",repeatCount:"indefinite"})})]}),(0,l.jsxs)("g",{children:[(0,l.jsx)("polygon",{points:"30.04 47.09 21.8 42.33 12.9 47.47 30.04 57.36 30.04 47.09","fill-opacity":"0",children:(0,l.jsx)("animate",{attributeName:"fill-opacity",values:"1;1;0;0;0;0;1",dur:"1.5",repeatCount:"indefinite"})}),(0,l.jsx)("polygon",{points:"20.8 40.6 20.8 31.08 11.9 25.95 11.9 45.73 20.8 40.6","fill-opacity":"0",children:(0,l.jsx)("animate",{attributeName:"fill-opacity",values:"0;1;1;0;0;0;0",dur:"1.5",repeatCount:"indefinite"})}),(0,l.jsx)("polygon",{points:"21.8 29.35 30.04 24.59 30.04 14.32 12.9 24.21 21.8 29.35","fill-opacity":"0",children:(0,l.jsx)("animate",{attributeName:"fill-opacity",values:"0;0;1;1;0;0;0",dur:"1.5",repeatCount:"indefinite"})}),(0,l.jsx)("polygon",{points:"32.04 14.32 32.04 24.59 40.28 29.35 49.17 24.21 32.04 14.32","fill-opacity":"0",children:(0,l.jsx)("animate",{attributeName:"fill-opacity",values:"0;0;0;1;1;0;0",dur:"1.5",repeatCount:"indefinite"})}),(0,l.jsx)("polygon",{points:"41.28 31.08 41.28 40.6 50.17 45.73 50.17 25.95 41.28 31.08","fill-opacity":"0",children:(0,l.jsx)("animate",{attributeName:"fill-opacity",values:"0;0;0;0;1;1;0",dur:"1.5",repeatCount:"indefinite"})}),(0,l.jsx)("polygon",{points:"40.28 42.33 32.04 47.09 32.04 57.36 49.17 47.47 40.28 42.33","fill-opacity":"0",children:(0,l.jsx)("animate",{attributeName:"fill-opacity",values:"1;0;0;0;0;1;1",dur:"1.5",repeatCount:"indefinite"})})]})]}),r=e=>{let{name:t,emblem:n,isLead:s}=e;const[i,r]=(0,a.useState)(0);return(0,l.jsxs)("div",{style:{background:"rgba(".concat(n.backgroundColor.r,", ").concat(n.backgroundColor.g,", ").concat(n.backgroundColor.b,")")},className:"w-[474px] h-[45px] flex flex-col shadow-lg rounded-sm relative tooltip tooltip-accent","data-tip":"The color is likely different from in-game. This is a limitation of Bungie's API reporting incorrect background colors.",children:[s?(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2044.21 2044.21",className:"absolute w-4 fill-[#ccd32b] mt-[1px]",fill:"currentColor",children:(0,l.jsx)("polygon",{points:"0 0 0 2044.21 2044.21 0 0 0"})}):(0,l.jsx)(l.Fragment,{}),(0,l.jsxs)("div",{className:"flex items-center gap-[0.4rem]",children:[(0,l.jsx)("img",{src:"https://www.bungie.net".concat(n.icon),className:"h-[45px] mr-[4px]"}),(0,l.jsx)("p",{className:"text-[22px] opacity-50 font-symbol font-medium tracking-[0.8px] text-white",children:"\uf103"}),(0,l.jsx)("p",{className:"text-[23px] -mt-[2px] max-w-[18rem] font-emblem tracking-[0.2px] font-medium text-white placeholder-white drop-shadow-[0_2px_0px_#0003] truncate",children:t||"Guardian"}),(0,l.jsx)("p",{className:"text-[22px] opacity-40 font-emblem font-medium tracking-[0.8px] text-white drop-shadow-[0_2px_0px_#0003]",children:"[WNW]"})]})]})};var o=n(475),c=n(204);const p=()=>{const[e,t]=(0,a.useState)({alertType:"alert",message:""}),[n]=(0,o.ok)(),{data:p,loading:d}=(()=>{const e="https://www.bungie.net/Platform/Destiny2/Manifest/",[t,n]=(0,a.useState)([]),[l,s]=(0,a.useState)(!0);return(0,a.useEffect)((()=>{(async()=>{const t=[];try{const l=await fetch(e);if(!l.ok)throw new Error("Failed to fetch data");const s=(await l.json()).Response.jsonWorldComponentContentPaths.en.DestinyInventoryItemDefinition;try{const e=await fetch("".concat("https://www.bungie.net").concat(s));if(!e.ok)throw new Error("Failed to fetch data");const n=await e.json();for(let a in n)if("Emblem"===n[a].itemTypeDisplayName){const e=n[a].hash;let l=n[a].displayProperties.name;const s=n[a].displayProperties.icon,i=n[a].secondaryIcon,r=n[a].secondaryOverlay,o=n[a].secondarySpecial,c=n[a].backgroundColor;1968995963===e&&(l+=" (Sunflower)"),l&&s&&i&&r&&o&&c&&t.push({hash:e,name:l,icon:s,secondaryIcon:i,secondaryOverlay:r,secondarySpecial:o,backgroundColor:{r:c.red,g:c.green,b:c.blue}})}}catch(a){console.log(a)}n(t)}catch(a){console.log(a)}finally{s(!1)}})()}),[e]),{data:t,loading:l}})(),[m,u]=(0,a.useState)(""),[h,x]=(0,a.useState)(!1),[g,f]=(0,a.useState)(!1),[w,y]=(0,a.useState)(n.get("name")?n.get("name"):""),[b,j]=(0,a.useState)({hash:0,name:"",icon:"",secondaryIcon:"",secondaryOverlay:"",secondarySpecial:"",backgroundColor:{r:0,g:0,b:0}});return(0,a.useMemo)((()=>{if(!d)if(n.get("emblem")){if(p.some((e=>e.hash===Number(n.get("emblem"))))){const e=p.findIndex((e=>e.hash===Number(n.get("emblem"))));j(p[e])}}else j(p[Math.floor(Math.random()*p.length)])}),[p]),(0,l.jsxs)("div",{className:"flex w-full flex-col items-center gap-2",children:[(0,l.jsx)("p",{className:"font-bold text-2xl font-display tracking-tighter text-accent",children:"Emblem Try On"}),(0,l.jsx)("p",{children:"Click on the name below to change it!"}),d?(0,l.jsx)(i,{}):(0,l.jsxs)("div",{className:"flex w-full flex-col items-center gap-3",children:[(0,l.jsx)(s,{name:w,setName:y,emblem:b,isLead:g}),(0,l.jsx)(r,{name:w,emblem:b,isLead:g}),(0,l.jsxs)("p",{className:"text-lg",children:["Trying on"," ",(0,l.jsx)("span",{className:"text-primary font-semibold",children:b.name})]}),(0,l.jsx)("input",{type:"text",placeholder:"Search an emblem",className:"input input-bordered w-full max-w-xs",id:"emblem-search",onChange:e=>{u(e.currentTarget.value)},onFocus:()=>x(!0),onBlur:()=>x(!1)}),h&&p.filter((e=>((0,c.mh)(e.name).toLowerCase().includes(m)||e.name.toLowerCase().includes(m))&&m.length>0)).length>0?(0,l.jsx)("div",{className:"absolute z-[50] border w-80 rounded gap-1 p-2 flex flex-col bg-base-100",style:{top:document.getElementById("emblem-search").getBoundingClientRect().y+50},children:p.filter((e=>((0,c.mh)(e.name).toLowerCase().includes(m)||e.name.toLowerCase().includes(m))&&m.length>0)).slice(0,7).map((e=>(0,l.jsxs)("p",{className:"flex align-left w-full items-center gap-2 hover:cursor-pointer",onMouseDown:()=>j(e),children:[(0,l.jsx)("img",{className:"w-8 rounded",src:"https://www.bungie.net"+e.icon}),e.name]},e.hash)))}):(0,l.jsx)(l.Fragment,{}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)("button",{className:"btn btn-success",onClick:()=>{navigator.clipboard.writeText("".concat(window.location.href,"?emblem=").concat(b.hash).concat(w?"&name=".concat(w):"")),t({alertType:"alert-info",message:"Copied link to clipboard! ".concat(w||"Guardian"," trying on ").concat(b.name,".")})},children:"Share"}),(0,l.jsxs)("details",{className:"dropdown dropdown-center",children:[(0,l.jsx)("summary",{className:"btn w-24",children:"Tools"}),(0,l.jsxs)("ul",{className:"p-2 shadow-xl menu dropdown-content bg-base-100 rounded-box w-52",children:[(0,l.jsx)("li",{children:(0,l.jsx)("a",{onClick:()=>j(p[Math.floor(Math.random()*p.length)]),children:"Randomize Emblem"})}),(0,l.jsx)("li",{children:(0,l.jsx)("a",{onClick:()=>f((e=>!e)),children:"Toggle Fireteam Lead"})}),(0,l.jsx)("li",{children:(0,l.jsx)("a",{href:"https://destinyemblemcollector.com/emblem?id="+b.hash,target:"_blank",children:"View on DEC"})}),(0,l.jsx)("li",{children:(0,l.jsx)("a",{href:"https://emblem.report/"+b.hash,target:"_blank",children:"View on emblem.report"})}),(0,l.jsx)("li",{className:"pointer-events-none",children:(0,l.jsx)("p",{className:"text-neutral",children:"More coming soon..."})})]})]})]}),e.message.length>0?(0,l.jsxs)("div",{role:"alert",className:"alert w-2/3 "+e.alertType,children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"stroke-current shrink-0 w-6 h-6",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,l.jsx)("span",{children:e.message})]}):(0,l.jsx)(l.Fragment,{}),(0,l.jsxs)("p",{className:"font-light",children:["As formerly seen on"," ",(0,l.jsx)("a",{className:"underline",href:"https://levante.dev",target:"_blank",children:"Levante"})]})]}),(0,l.jsx)("div",{className:"divider font-display"})]})}},204:(e,t,n)=>{n.d(t,{Ae:()=>s,CL:()=>a,cT:()=>i,cW:()=>l,kH:()=>r,mh:()=>c,vh:()=>o});const a=e=>{if(0===e.length)return"";if(1===e.length)return e[0];if(2===e.length)return"".concat(e[0]," and ").concat(e[1]);const t=e.slice(0,-1).join(", "),n=e[e.length-1];return"".concat(t,", and ").concat(n)},l={cone:["circle","triangle"],cube:["square","square"],cylinder:["circle","square"],prism:["triangle","square"],pyramid:["triangle","triangle"],sphere:["circle","circle"]},s=e=>{for(const[t,n]of Object.entries(l))if(JSON.stringify(n.sort())===JSON.stringify(e.sort()))return t;return null},i={circle:["triangle","square"],square:["circle","triangle"],triangle:["circle","square"]},r=e=>{const t=["circle","circle","triangle","triangle","square","square"];for(const n of Object.values(e))if(null!==n)for(const e of l[n])t.splice(t.indexOf(e),1);return t},o=e=>{const t=e.reduce(((e,t)=>(e[t]=(e[t]||0)+1,e)),{}),n=[];return 2===t.circle&&n.push("sphere"),2===t.square&&n.push("cube"),2===t.triangle&&n.push("pyramid"),t.circle&&t.triangle&&n.push("cone"),t.circle&&t.square&&n.push("cylinder"),t.triangle&&t.square&&n.push("prism"),n},c=e=>e.replace("\xea","e").replace("\xe0","a").replace("\xc8","E").replace("\xf6","o").replace("\u2026","...")}}]);
//# sourceMappingURL=821.cd168b9f.chunk.js.map